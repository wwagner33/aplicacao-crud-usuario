<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>√Årea Protegida</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
        text-align: center;
      }
      .logout-btn {
        background-color: #f44336;
        color: white;
        border: none;
        padding: 10px 20px;
        cursor: pointer;
        border-radius: 5px;
      }
    </style>
  </head>
  <body>
    <h1>Bem-vindo √† √Årea Protegida! üîí</h1>
    <p>
      Voc√™ est√° autenticado como
      <strong id="user-email">admin@meuemail.com</strong>.
    </p>

    <h3>Op√ß√µes:</h3>
    <button onclick="location.href='/lista_usuarios.html'">
      Listar Usu√°rios
    </button>
    <button onclick="location.href='/cadastra_usuario.html'">
      Cadastrar Usu√°rio
    </button>
    <button onclick="location.href='/remover_usuario.html'">
      Remover Usu√°rio
    </button>

    <br /><br />
    <button class="logout-btn" id="logoutBtn">Sair</button>

    <script>
      // Verifica se o token existe no localStorage
      const token = localStorage.getItem("token");
      if (!token) {
        alert("Acesso negado! Fa√ßa login primeiro.");
        window.location.href = "/login.html";
      }

      // Bot√£o de logout
      document.getElementById("logoutBtn").addEventListener("click", () => {
        localStorage.removeItem("token"); // Remove o token
        window.location.href = "/login.html"; // Redireciona para o login
      });

      // Opcional: Verifica com o servidor se o token √© v√°lido
      async function validarToken() {
        const response = await fetch("/protegida.html", {
          headers: { Authorization: `Bearer ${token}` },
        });

        if (!response.ok) {
          localStorage.removeItem("token");
          window.location.href = "/login.html";
        }
      }
      validarToken(); // Chama a valida√ß√£o ao carregar a p√°gina
    </script>
  </body>
</html>
